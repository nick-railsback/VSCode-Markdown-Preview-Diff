/**
 * Diff Highlighting Styles
 * Theme-aware CSS for visual change indicators
 *
 * Uses VS Code CSS variables for automatic theme adaptation (NFR-I3)
 * - Adapts to light/dark themes automatically
 * - Fallback colors (GitHub style) for compatibility
 * - Meets WCAG AA contrast requirements (4.5:1)
 */

/* Added content highlighting (AC1) */
.diff-added {
	/* Use VS Code diff editor colors, fallback to GitHub green */
	background-color: var(
		--vscode-diffEditor-insertedTextBackground,
		rgba(16, 185, 129, 0.2)
	);
	/* Solid green underline border */
	border-bottom: 2px solid var(
		--vscode-gitDecoration-addedResourceForeground,
		rgb(16, 185, 129)
	);
}

/* Removed content highlighting (AC2) */
.diff-removed {
	/* Use VS Code diff editor colors, fallback to GitHub red */
	background-color: var(
		--vscode-diffEditor-removedTextBackground,
		rgba(239, 68, 68, 0.2)
	);
	/* Line-through text decoration */
	text-decoration: line-through;
	/* Solid red underline border */
	border-bottom: 2px solid var(
		--vscode-gitDecoration-deletedResourceForeground,
		rgb(239, 68, 68)
	);
}

/* Gutter markers for change regions (AC4) */
.diff-gutter-marker {
	position: absolute;
	/* Position at left edge (-20px relative to content) */
	left: -20px;
	/* Use VS Code foreground color with reduced opacity, fallback to gray */
	color: var(--vscode-editor-foreground, #666);
	opacity: 0.6;
	font-weight: bold;
	/* Ensure marker doesn't interfere with text selection */
	user-select: none;
	pointer-events: none;
}

/* Ensure parent elements have position: relative for gutter positioning */
.markdown-body {
	position: relative;
}

/* Ensure code blocks also support relative positioning for gutter markers */
.markdown-body pre {
	position: relative;
}

/* Ensure list items support relative positioning for gutter markers */
.markdown-body li {
	position: relative;
}

/* Ensure table cells support relative positioning for gutter markers */
.markdown-body td,
.markdown-body th {
	position: relative;
}

/* Current change highlighting (AC9 - Epic 4)
 * Applied to the change currently being navigated to
 * Uses VS Code focus border color for consistency
 * Meets WCAG AA contrast requirements (4.5:1)
 */
.diff-current {
	outline: 2px solid var(--vscode-focusBorder, #007acc);
	outline-offset: 2px;
	box-shadow: 0 0 8px rgba(0, 122, 204, 0.4);
	border-radius: 3px;
}

/* Current change when added */
.diff-current.diff-added {
	outline-color: var(--vscode-gitDecoration-addedResourceForeground, #4d9375);
	box-shadow: 0 0 8px rgba(77, 147, 117, 0.4);
}

/* Current change when removed */
.diff-current.diff-removed {
	outline-color: var(--vscode-gitDecoration-deletedResourceForeground, #ab5656);
	box-shadow: 0 0 8px rgba(171, 86, 86, 0.4);
}

/* ===========================================
 * High-Contrast Highlight Style (AC4, FR44)
 * Applied when markdownPreviewDiff.highlightStyle = "high-contrast"
 * More prominent colors with borders for accessibility
 * =========================================== */

/* High-contrast body class applied to diff container */
.highlight-style-high-contrast .diff-added {
	/* Stronger green background (0.4 opacity vs 0.2 default) */
	background-color: rgba(0, 200, 0, 0.4);
	/* Solid 2px border for visibility */
	border: 2px solid rgb(0, 180, 0);
	border-radius: 3px;
	padding: 0 2px;
}

.highlight-style-high-contrast .diff-removed {
	/* Stronger red background (0.4 opacity vs 0.2 default) */
	background-color: rgba(200, 0, 0, 0.4);
	/* Solid 2px border for visibility */
	border: 2px solid rgb(180, 0, 0);
	border-radius: 3px;
	padding: 0 2px;
	text-decoration: line-through;
}

/* High-contrast current change highlighting */
.highlight-style-high-contrast .diff-current {
	outline: 3px solid var(--vscode-focusBorder, #007acc);
	outline-offset: 3px;
	box-shadow: 0 0 12px rgba(0, 122, 204, 0.6);
}

.highlight-style-high-contrast .diff-current.diff-added {
	outline-color: rgb(0, 150, 0);
	box-shadow: 0 0 12px rgba(0, 150, 0, 0.6);
}

.highlight-style-high-contrast .diff-current.diff-removed {
	outline-color: rgb(150, 0, 0);
	box-shadow: 0 0 12px rgba(150, 0, 0, 0.6);
}
